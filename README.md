# LocalWiFihatHubbridgedbyMeshLoRa
Localized Wi-Fi Chat-Hubs bridged by Meshtastic LoRa
ðŸ“– Project: Mesh-Gateway MVPVersion: 1.0.0Concept: Localized Wi-Fi Chat-Hubs bridged by Meshtastic LoRa.1. System OverviewThe goal is to provide a low-cost, resilient communication infrastructure where users do not need specialized hardware. They connect their existing smartphones to an ESP32 Access Point, which acts as a gateway to the Meshtastic Mesh.2. Hardware Architecture2.1 The Hotspot Node (Physical Stack)Each station is a "Black Box" containing:Controller: ESP32 (DevKit V1 or similar).Radio: Meshtastic-compatible node (e.g., Heltec V3, T-Beam, or a standalone Rak WisBlock).Interconnect: 3-wire Serial (TX, RX, GND).2.2 Device RolesComponentFunctionProtocolUser PhoneUI Interaction / PWAHTTP / WebSocketESP32Session Management / Serial BridgeUART / 802.11 b/g/nMesh NodeLong-range Data TransmissionLoRa (Meshtastic)3. Communication ProtocolsTo ensure interoperability, we must define exactly how data moves through each "hop."3.1 User â†” ESP32 (The "Last Meter")Transport: WebSocket (Full-duplex).Payload: JSON objects.Structure:JSON{
  "type": "msg",
  "sender": "Alice",
  "text": "Hello Mesh!",
  "dest": "GLOBAL" // or a specific Station ID
}
3.2 ESP32 â†” Meshtastic Node (The "Bridge")Transport: UART Serial @ 115200 Baud.Mode: Text-based or Protobuf.Logic: The ESP32 listens to the WebSocket; if the message is for an external station, it "prints" the string to the Serial port.Payload Example: Alice: Hello Mesh! (Sent as a Meshtastic broadcast).4. Software Design Structure4.1 ESP32 Functional ModulesAP & Captive Portal: Manages the Wi-Fi connection and redirects users to the Chat UI.WebSocket Server: Handles up to 5 concurrent client connections.State Manager: Keeps a local cache of the last 50 messages and the list of online users.Serial Parser: A background task that monitors the Meshtastic Node for incoming LoRa packets.4.2 Web UI (The PWA)Tech Stack: Vanilla JS, CSS3, HTML5 (Single File).Persistence: localStorage for IDs, nicknames, and chat history.Connectivity: Automatic re-connection logic for the WebSocket.5. Deployment ConstraintsUser Limit: Hardware restricted to 5 users per ESP32 to maintain Wi-Fi stability and RAM health.Power: Total stack should pull < 200mA (Idle), making it solar-compatible.Identity: Users are identified by a unique UUID generated in the browser and a human-readable Nickname.6. Roadmap & Milestone DefinitionPhase 1: ESP32 local chat (WebSocket stability). [COMPLETED IN BRAINSTORM]Phase 2: Serial Interfacing (UART link between ESP32 and Meshtastic).Phase 3: Mesh Sync (Managing packets arriving from other nodes).Phase 4: PWA Packaging (Finalizing the "Add to Home Screen" workflow).Next Step in DocumentationTo dive deeper, we should focus on the Serial Communication Protocol (Section 3.2). Specifically, how the ESP32 will "know" that a message came from the LoRa mesh versus a local user.Would you like me to expand the documentation on the Serial Data Handling logic, including how we prevent the ESP32 from getting overwhelmed by Meshtastic's debug chatter?
